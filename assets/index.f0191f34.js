var O=Object.defineProperty;var R=(i,t,s)=>t in i?O(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var n=(i,t,s)=>(R(i,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))h(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function h(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();function P(i,t){const s=y({from:i.x,to:i.x+i.width},{from:t.x,to:t.x+t.width}),h=y({from:i.y,to:i.y+i.height},{from:t.y,to:t.y+t.height});return s&&h}function y(i,t){const s=(i.from+i.to)/2,h=Math.abs(i.from-i.to)/2,e=(t.from+t.to)/2,o=Math.abs(t.from-t.to)/2;return Math.abs(s-e)<h+o}function g(i,t){const s=t-i+1;return Math.round(Math.random()*s+i)}const r={to:(i,t)=>[i,t],add:(i,t)=>[i[0]+t[0],i[1]+t[1]],scale:(i,t)=>[i[0]*t,i[1]*t]},p=50;class v{constructor(){n(this,"position",r.to(g(p,f-p),g(p,d-p)));n(this,"height",20);n(this,"width",4)}paint(t){t.fillStyle="white";const[s,h]=this.position,e=this.width,o=this.height;t.save(),t.translate(s,h),t.fillRect(-e/2,-o/2,e,o),t.rotate(Math.PI/4),t.fillRect(-e/2,-o/2,e,o),t.rotate(Math.PI/4),t.fillRect(-e/2,-o/2,e,o),t.rotate(Math.PI/4),t.fillRect(-e/2,-o/2,e,o),t.restore()}}const L={RIGHT:r.to(1,0),LEFT:r.to(-1,0),UP:r.to(0,-1),DOWN:r.to(0,1)};class M{constructor(){n(this,"lastSide","RIGHT");n(this,"mode","RIGHT");n(this,"size",r.to(192,102));n(this,"position",r.to(0,d-this.size[1]));n(this,"velocity",8);n(this,"checkWalls",{RIGHT:()=>{this.position[0]+this.size[0]>=f&&(this.lastSide="LEFT",this.mode="LEFT",this.position[0]=f-this.size[0])},LEFT:()=>{this.position[0]<=0&&(this.mode="RIGHT",this.lastSide="RIGHT",this.position[0]=0)},UP:()=>{this.position[1]<=0&&(this.mode="DOWN",this.position[1]=0)},DOWN:()=>{this.position[1]+this.size[1]>=d&&(this.mode=this.lastSide,this.position[1]=d-this.size[1])}});document.addEventListener("keydown",t=>{(t.key==="Enter"||t.key===" ")&&this.turn()}),document.addEventListener("click",()=>this.turn())}turn(){this.mode!=="UP"&&this.mode!=="DOWN"&&(this.mode="UP")}update(){this.position=r.add(this.position,r.scale(L[this.mode],this.velocity)),this.checkWalls[this.mode]()}paint(t){t.fillStyle="red",t.fillRect(this.position[0],this.position[1],this.size[0],this.size[1])}}const a=document.createElement("canvas"),f=1920,d=1080;a.width=f;a.height=d;a.style.maxHeight="100vh";a.style.maxWidth="100vw";a.style.background="#343434";document.body.appendChild(a);const m=a.getContext("2d"),l=new M;let c=Array(10).fill(0).map(()=>new v);function w(){m.clearRect(0,0,f,d),l.update(),c=c.filter(i=>!P({x:i.position[0],y:i.position[1],height:i.height,width:i.height},{x:l.position[0],y:l.position[1],width:l.size[0],height:l.size[1]})),c.length===0&&(c=Array(10).fill(0).map(()=>new v),l.velocity+=3);for(const i of c)i.paint(m);l.paint(m),requestAnimationFrame(w)}requestAnimationFrame(w);
